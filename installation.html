

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Installation &mdash; UncoverML 0.4.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Workflows" href="workflows.html" />
    <link rel="prev" title="UncoverML Documentation" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> UncoverML
          

          
          </a>

          
            
            
              <div class="version">
                0.4.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#ubuntu-18-04">Ubuntu 18.04</a></li>
<li class="toctree-l2"><a class="reference internal" href="#hpc">HPC</a></li>
<li class="toctree-l2"><a class="reference internal" href="#windows-10">Windows 10</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="workflows.html">Workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="models.html">Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev.html">Developer Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="projectreport.html">NICTA Project Report</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">UncoverML API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="history.html">History</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">UncoverML</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Installation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/installation.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<p>UncoverML requires Python 3.6 or 3.7 on all platforms.
Python 3.8 is currently untested and not supported.</p>
<div class="section" id="ubuntu-18-04">
<h2>Ubuntu 18.04<a class="headerlink" href="#ubuntu-18-04" title="Permalink to this headline">¶</a></h2>
<p>UncoverML supports Ubuntu 18.04 with Python 3.6 or Python 3.7.</p>
<p>The following instructions may be used for other Linux distributions but the packages and package
manager used may be different. If you require help using UncoverML with a different Linux
distribution, ask for help on our
<a class="reference external" href="https://github.com/GeoscienceAustralia/uncover-ml/issues">GitHub Issues</a> page.</p>
<p>Before installing UncoverML, ensure your OS has the following packages:</p>
<ul class="simple">
<li><p>gdal</p></li>
<li><p>openmpi</p></li>
</ul>
<p>These can be installed with the following commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt-get install <span class="se">\</span>
    gdal-bin libgdal-dev <span class="se">\</span>
    libblas-dev liblapack-dev <span class="se">\</span>
    libatlas-base-dev libproj-dev <span class="se">\</span>
    gfortran <span class="se">\</span>
    openmpi-bin libopenmpi-dev
</pre></div>
</div>
<p>It’s recommended to use a Python virtual environment (venv) when installing UncoverML. This will
prevent packages that it requires from conflicting with any existing Python environments.</p>
<p>To create a virtual environment, run in your shell:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3 -m venv /path/to/your/venv
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">/path/to/your/venv</span></code> is the directory where the venv will exist.</p>
<p>Once created, activate the venv with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span> /path/to/your/venv/bin/activate
</pre></div>
</div>
<p>You are now ready to install UncoverML. To install from the repository, clone using git:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone git@github.com:GeoscienceAustralia/uncover-ml
<span class="nb">cd</span> uncover-ml
</pre></div>
</div>
<p>By default, the repository will be on the master branch. UncoverML is under heavy development
at this time and master releases are infrequent. It’s recommended to switch to the develop branch
using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git checkout develop
</pre></div>
</div>
<p>Before the UncoverML package can be installed, there are some required packages that need to be installed first.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install -U pip setuptools
pip install -r requirements-pykrige.txt
</pre></div>
</div>
<p>Once these are done, you can install UncoverML with pip:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install .
</pre></div>
</div>
<p><strong>Alternatively</strong>, you can install the latest stable release from the Python Package Index.
Note you will have install some prerequisites:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install -U pip setuptools
pip install <span class="nv">Cython</span><span class="o">==</span><span class="m">0</span>.29.13
pip install <span class="nv">numpy</span><span class="o">==</span><span class="m">1</span>.17.2
pip install <span class="nv">scipy</span><span class="o">==</span><span class="m">1</span>.3.1
pip install <span class="nv">matplotlib</span><span class="o">==</span><span class="m">3</span>.1.1
pip install uncover-ml
</pre></div>
</div>
<p>To ensure the installation has been successful, try running UncoverML against the test data
included in the repository:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>uncoverml learn tests/test_data/sirsam/random_forest/sirsam_Na_randomforest.yaml
</pre></div>
</div>
<p>This will start training a random forest model on the test data. It may take a few minutes.
If the script completes successfully (there will be a log message saying “Finished!”) then
UncoverML has been correctly installed.</p>
<p>This completes the installation. Check out the <span class="xref std std-ref">Usage</span> documentation to get started using
UncoverML.</p>
<p>When you are finished using UncoverML, don’t forget to deactivate your virtual environment using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>deactivate
</pre></div>
</div>
</div>
<div class="section" id="hpc">
<h2>HPC<a class="headerlink" href="#hpc" title="Permalink to this headline">¶</a></h2>
<p>The following instructions refer specifically to NCI’s Gadi and Virtual Desktop (VDI), but may be applicable to other
HPC environments running PBS and MPI.</p>
<p>The first step is to unload unrequired and load required system modules. The below are compatible with the VDI (and Raijin, for legacy purposes):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>module unload intel-cc
module unload intel-fc

module load python3/3.6.2
module load gdal/2.2.2
module load openmpi/2.1.1
module load geos/3.5.0
</pre></div>
</div>
<p>If you are running on the new Gadi supercomputer, the modules required are different:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>module load ptython3/3.7.4
module load gdal/3.0.2
module load openmpi/2.1.6
</pre></div>
</div>
<p>For convenience you can place the above commands in your <code class="docutils literal notranslate"><span class="pre">~/.bashrc</span></code> (<code class="docutils literal notranslate"><span class="pre">~/.profile</span></code> on VDI).
Alternatively, if you already have a configuration in your profile you’d like to preserve but don’t
want to type the above commands every time, you can source the <code class="docutils literal notranslate"><span class="pre">uncover-ml/pbs/setup_vdi.sh</span></code> or
<code class="docutils literal notranslate"><span class="pre">uncover-ml/pbs/setup_gadi.sh</span></code> scripts depending on your platform.</p>
<p>When using the NCI, a virtual environment is recommended. To create a virtual environment, run in your shell:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3 -m venv /path/to/your/venv
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">/path/to/your/venv</span></code> is the directory where the venv will exist.</p>
<p>Once created, activate the venv with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span> /path/to/your/venv/bin/activate
</pre></div>
</div>
<p>You are now ready to install UncoverML. To install from the repository, clone using git:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone git@github.com:GeoscienceAustralia/uncover-ml
<span class="nb">cd</span> uncover-ml
</pre></div>
</div>
<p>By default, the repository will be on the master branch. UncoverML is under heavy development
at this time and master releases are infrequent. It’s recommended to switch to the develop branch
using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git checkout develop
</pre></div>
</div>
<p>Before the UncoverML package can be installed, there are some required packages that need to be installed first.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install -U pip setuptools
pip install -r requirements-pykrige.txt
</pre></div>
</div>
<p>Once these are done, you can install UncoverML with pip:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install .
</pre></div>
</div>
<p>On the VDI you may have to use <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> to install:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python setup.py install
</pre></div>
</div>
<p>To ensure the installation has been successful, try running UncoverML against the test data
included in the repository:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>uncoverml learn tests/test_data/sirsam/random_forest/sirsam_Na_randomforest.yaml
</pre></div>
</div>
<p>This will start training a random forest model on the test data. It may take a few minutes.
If the script completes successfully (there will be a log message saying “Finished!”) then
UncoverML has been correctly installed.</p>
<p>This completes the installation. Check out the <span class="xref std std-ref">Usage</span> documentation to get started using
UncoverML.</p>
<p>When you are finished using UncoverML, don’t forget to deactivate your virtual environment using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>deactivate
</pre></div>
</div>
</div>
<div class="section" id="windows-10">
<h2>Windows 10<a class="headerlink" href="#windows-10" title="Permalink to this headline">¶</a></h2>
<p>UncoverML can be run on Windows 10 with the help of Anaconda.
This guide is intended for general users, but some steps have extra
notes pertaining to installing on Geoscience Australia Windows devices.</p>
<p>Microsoft MPI is required to use UncoverML on Windows.
Download MS-MPI from the <a class="reference external" href="https://docs.microsoft.com/en-us/message-passing-interface/microsoft-mpi">MS-MPI website</a>
and install.</p>
<p>You need to install the <code class="docutils literal notranslate"><span class="pre">.msi</span></code> and <code class="docutils literal notranslate"><span class="pre">.exe</span></code> files.
Also, add to your <code class="docutils literal notranslate"><span class="pre">Path</span></code> environment variable the SDK install location
(by default: <code class="docutils literal notranslate"><span class="pre">C:\Program</span> <span class="pre">Files</span> <span class="pre">(x86)\Microsoft</span> <span class="pre">SDKs\MPI</span></code>).
Search online for “add Windows 10 Path variable” if unsure how to do this.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>On Geoscience Australia devices, you will need to install MS-MPI via the Software Center
(may be named MS-MPI SDK or similar).</p>
</div>
<p>Download Anaconda from the <a class="reference external" href="https://www.anaconda.com/products/individual#windows">Anaconda website</a>
and install.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>On Geoscience Australia devices, you will need to install Anaconda from the Software Center.</p>
</div>
<p>Once installed, open the Anaconda navigator and create a new environment:</p>
<ul class="simple">
<li><p>Select ‘Environments’ in left sidebar</p></li>
<li><p>At the bottom of the screen, select ‘Create’</p></li>
</ul>
<img alt="_images/anaconda_step1.png" src="_images/anaconda_step1.png" />
<p>We’ll use Anaconda to install some required packages:</p>
<ul class="simple">
<li><p>Select the environment you have just created</p></li>
<li><p>In the package list window, select ‘Not installed’ from the filter
drop down menu</p></li>
<li><p>Type ‘gdal’ into the search bar and click ‘Update index…’</p></li>
<li><p>Once the packages have been found, select the checkboxes for ‘gdal’
and ‘libgdal’ and click ‘Apply’. A window will display showing required
dependencies to install. Accept these and continue.</p></li>
</ul>
<img alt="_images/anaconda_step2_install_packages.png" src="_images/anaconda_step2_install_packages.png" />
<p>Repeat the above process for the following packages (‘Update index…’ doesn’t need to be clicked again):</p>
<ul class="simple">
<li><p>rasterio</p></li>
<li><p>fiona</p></li>
</ul>
<p>Once complete, open a terminal with your environment activated by clicking the right-facing arrow
next to your environment name and selecting ‘Open Terminal’.</p>
<p>Install the MPI Python library:</p>
<ul class="simple">
<li><p>In the terminal, run:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda install -c intel mpi4py
</pre></div>
</div>
<p>Now clone the UncoverML repository:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Cloning the repository can be done through Git Bash or your
preferred git client. In this case it’s done through the Windows
CMD terminal for convenience.</p>
</div>
<ul class="simple">
<li><p>Navigate to your desired directory</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;DRIVE_LETTER&gt;:</span></code> will change drives in the Windows CMD terminal and
<code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">&lt;path&gt;</span></code> will change directories.</p></li>
</ul>
</li>
<li><p>Clone the repository using <cite>git clone https://github.com/GeoscienceAustralia/uncover-ml.git</cite></p>
<ul>
<li><p>If you do not have git installed, you can install it using Anaconda navigator
using the <span class="xref std std-ref">method above</span></p></li>
</ul>
</li>
<li><p>Once cloned, cd into the repository using <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">uncover-ml</span></code></p></li>
<li><p>By default, the repository will be on the master branch. UncoverML is under heavy development
at this time and master releases are infrequent. It’s recommended to switch to the develop branch
using <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">develop</span></code></p></li>
</ul>
<p>Pip can now be used to install UncoverML into our Anaconda environment:</p>
<ul class="simple">
<li><p>In the terminal, run:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install -r requirements-pykrige.txt
pip install .
</pre></div>
</div>
<p>UncoverML will now be installed in your Anaconda environment.</p>
<p>To test that it’s operational, run the included Windows test config:</p>
<ul>
<li><p>Modify the example config to point to your uncover-ml repository so that the test data can be
found:</p>
<ul class="simple">
<li><p>Open <code class="docutils literal notranslate"><span class="pre">...\uncover-ml\configs\windows_random_forest.yaml</span></code> in a text editor and modify the</p></li>
</ul>
<p>section of the file paths on lines 13, 20, 35 and 41 that contain <code class="docutils literal notranslate"><span class="pre">path\to\uncoverml</span></code>
to the path to where you cloned the uncover-ml repository. For example, if I cloned
the repository to <code class="docutils literal notranslate"><span class="pre">C:\Users\bmous</span></code> then this would become <code class="docutils literal notranslate"><span class="pre">C:\Users\bmous\uncover-ml\rest-of-path</span></code></p>
</li>
<li><p>In the terminal, run:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>uncoverml learn configs<span class="se">\w</span>indows_random_forest.yaml
</pre></div>
</div>
<p>This trains a multirandomforest model on some test data</p>
<ul class="simple">
<li><p>In the terminal, run:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>uncoverml predict configs<span class="se">\w</span>indows_random_forest.yaml
</pre></div>
</div>
<p>This performs a prediction on the test data using the trained model</p>
<p>If the installation and execution was successful, then the results will be available
in <code class="docutils literal notranslate"><span class="pre">...path</span> <span class="pre">to</span> <span class="pre">uncover-ml</span> <span class="pre">repository\random_forest_out</span></code>.</p>
<p>On Windows, multiprocessing can be utilised by running UncoverML commands using <code class="docutils literal notranslate"><span class="pre">mpiexec</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mpiexec -n <span class="m">4</span> uncoverml learn configs<span class="se">\w</span>indows_random_forest.yaml
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">-n</span> <span class="pre">4</span></code> specifies to run the training with 4 processors.</p>
<p>With that the installation is complete. Read the documentation further to learn how to
fully utilise UncoverML. When you want to run UncoverML on Windows, make sure to launch
a terminal from Anaconda Navigator using your UncoverML environment.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You may get a Windows firewall warning asking for exceptions for mpiexec and
Hydra proxy. These can be safely canceled. The networking requirement of
MPI will work on local machines without setting firewall rules.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The Cubist functionality is currently not available when using Windows.
This requires further work in making Cubist compatible with Windows and
writing a Cubist install script for Windows.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="workflows.html" class="btn btn-neutral float-right" title="Workflows" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="UncoverML Documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2019, Geoscience Australia

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>